<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <meta name="description" content="PohaÑana, japita la inea kp, porque la pasion nos une y el SEO debe de llegar a no se cuantos caracteres de
    porqueria para que  funcione la madre esa de su hermana en 4 en tanga de ilo dental casero hecho por rudolf que no tengo una media idea de quien carajos sea el muy imvesil de mierda besos a todos menos a maluma">
    <meta name="keywords" content="PohaÑana">
    <meta name="author" content="Brahian Riveros">
    <!--facebook meta tags-->
    <meta property="og:url"                content="http://127.0.0.1:5500/" />
    <meta property="og:type"               content="article" />
    <meta property="og:title"              content="PohaÑana" />
    <meta property="og:description"        content="PohaÑana, japita la inea kp, porque la pasion nos une y el SEO debe de llegar a no se cuantos caracteres de
    porqueria para que  funcione la madre esa de su hermana en 4 en tanga de ilo dental casero hecho por rudolf que no tengo una media idea de quien carajos sea el muy imvesil de mierda besos a todos menos a maluma" />
    <meta property="og:image"              content="img/brand.png" />
    <!--twitter meta tags-->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@Pohanana" />
    <meta name="twitter:title" content="PohaÑana" />
    <meta name="twitter:description" content="PohaÑana, japita la inea kp" />
    <meta name="twitter:image" content="http://127.0.0.1:5500/img/brand.png" />

       
    <link rel="stylesheet" href="http://localhost/css-min/main.min.css">
    <title>PohaÑana</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
<header>
    <!--header desktop-->
    <div class="header-desktop-container">
        <div class="header-desktop-content">
            <div class="brand-logo">
                <a href="/" class="logo-img">
                    <img src="http://localhost/img/brand.webp" alt="logo img">
                </a>
            </div>
            <nav class="nav-bar">
                <div class="nav-bar-menu">
                    <a href="/" class="nav-link">Inicio</a>
                    <a href="/acerca-de" class="nav-link">Acerca de</a>
                    <a href="/recetas" class="nav-link">Recetas</a>
                    <a href="/yuyos" class="nav-link">Yuyos</a>
                    <a href="/contacto" class="nav-link">Contacto</a>
                </div>
            </nav>
        </div>
    </div>
    <!--header mobile-->
</header>
    


<div class="layout">
    <h1>Convert image to webp format</h1>
    <div style=" max-height: 100%;
    max-width: 100%;">
      <input type="file" multiple accept="image/*">
    </div>
    <div id="previews"></div>
    <div class="dropTarget"></div>
  </div>








    <footer>
        <div class="footer-container">
            <div class="footer-copy"><em> &copy PohaÑana 2021 | Todos los derechos reservados</em></div>
            <div class="footer-content">
                <div class="foot1">
                    <div class="about-us">
                        <div class="about-us-content">
                            <div class="footer-img"><img src="http://localhost/img/brand.webp" alt="footer img"></div>
                            <h1>Acerca de nosotros</h1>
                            <p>Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ex, et!</p>
                        </div>
                    </div>
                </div>
                <div class="foot2">
                    <div class="media-links">
                        <h1 >Redes sociales</h1>
                        <div class="media-links-container">
                            <a href="index.html" class="fb-link" title="Facebook"><i class="fab fa-facebook"></i></a>
                            <a href="index.html" class="ig-link" title="Instagram"><i class="fab fa-instagram"></i></a>
                            <a href="index.html" class="yt-link" title="Youtube"><i class="fab fa-youtube"></i></a>
                        </div>
                    </div>
                </div>
                <div class="foot3">
                    <div class="enlaces-utiles">
                        <h1>Enlaces utiles</h1>
                        <div class="link-container">
                        <a href="index.html">title</a>
                        <a href="index.html">title</a>
                        <a href="index.html">title</a>
                        </div>
                        
                    </div>
                </div>
            </div>
            <div class="footer-politica">
                <a href="#">Politica de Privacidad</a>
                <a href="#">Politica de Cookie</a>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script> 
    <script src="http://localhost/js/main.js"></script>

    <script>
        let refs = {};
refs.imagePreviews = document.querySelector('#previews');
refs.fileSelector = document.querySelector('input[type=file]');

function addImageBox(container) {
  let imageBox = document.createElement("div");
  let progressBox = document.createElement("progress");
  imageBox.appendChild(progressBox);
  container.appendChild(imageBox);
  
  return imageBox;
}

function processFile(file) {
  if (!file) {
    return;
  }
  console.log(file);

  let imageBox = addImageBox(refs.imagePreviews);

  // Load the data into an image
  new Promise(function (resolve, reject) {
    let rawImage = new Image();

    rawImage.addEventListener("load", function () {
      resolve(rawImage);
    });

    rawImage.src = URL.createObjectURL(file);
  })
  .then(function (rawImage) {
    // Convert image to webp ObjectURL via a canvas blob
    return new Promise(function (resolve, reject) {
      let canvas = document.createElement('canvas');
      let ctx = canvas.getContext("2d");

      canvas.width = rawImage.width;
      canvas.height = rawImage.height;
      ctx.drawImage(rawImage, 0, 0);

      canvas.toBlob(function (blob) {
        resolve(URL.createObjectURL(blob));
      }, "image/webp");
    });
  })
  .then(function (imageURL) {
    // Load image for display on the page
    return new Promise(function (resolve, reject) {
      let scaledImg = new Image();

      scaledImg.addEventListener("load", function () {
        resolve({imageURL, scaledImg});
      });

      scaledImg.setAttribute("src", imageURL);
    });
  })
  .then(function (data) {
    // Inject into the DOM
    let imageLink = document.createElement("a");

    imageLink.setAttribute("href", data.imageURL);
    imageLink.setAttribute('download', `${file.name}.webp`);
    imageLink.appendChild(data.scaledImg);

    imageBox.innerHTML = "";
    imageBox.appendChild(imageLink);
  });
}

function processFiles(files) {
  for (let file of files) {
    processFile(file);
  }
}

function fileSelectorChanged() {
  processFiles(refs.fileSelector.files);
  refs.fileSelector.value = "";
}

refs.fileSelector.addEventListener("change", fileSelectorChanged);

// Set up Drag and Drop
function dragenter(e) {
  e.stopPropagation();
  e.preventDefault();
}

function dragover(e) {
  e.stopPropagation();
  e.preventDefault();
}

function drop(callback, e) {
  e.stopPropagation();
  e.preventDefault();
  callback(e.dataTransfer.files);
}

function setDragDrop(area, callback) {
  area.addEventListener("dragenter", dragenter, false);
  area.addEventListener("dragover", dragover, false);
  area.addEventListener("drop", function (e) { drop(callback, e); }, false);
}
setDragDrop(document.documentElement, processFiles);
    </script>
</body>
</html>
